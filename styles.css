:root{
  --bg:#0e1b20; --surface:#0e1b20; --divider:#132e36;
  --text:#e9f1f1; --muted:#9fb1b8;
  --token:#0f2c35; --token-border:#1f3b44;
  --accent:#58cc02; --accent-2:#6ee300; --danger:#ff4b4b;
  --shadow:0 10px 30px rgba(0,0,0,.35); --radius:14px;
  --font:'Nunito',system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;

  /* lesson image sizes */
  --img-size-uncompleted: 100px;
  --img-size-completed:   100px;

  /* rightbar image macros */
  --league-size: 300px;   /* Emerald league badge size */
  --quest-size: 60p;     /* quest1/2/3 size */
  --chest-size: 50px;     /* chest.png size */
}

*{box-sizing:border-box}
html,body{height:100%}
html{font-size:16px}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:var(--font);
}

/* Generic variable-sized image helper */
.img-var{
  height:var(--img-size,24px);
  width:auto;
  display:block;
  object-fit:contain;
}

/* Convenience wrappers using root macros */
.u-size-league{ --img-size: var(--league-size); }
.u-size-quest{  --img-size: var(--quest-size); }
.u-size-chest{  --img-size: var(--chest-size); }

.app-shell{
  display:grid;
  /* sidebar | roadmap area (max 900px) | right bar (380px) */
  grid-template-columns:300px minmax(0, 900px) 500px;
  gap:16px;
  min-height:100vh;

  /* center whole three-column block in the viewport */
  justify-content:flex-start;
}

.sidebar,.rightbar,.main{background:var(--surface)}

/* LEFT SIDEBAR */
.sidebar{
  padding:16px 8px;
  position:sticky;
  top:0;
  height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
}
.brand{width:100%;display:flex;justify-content:center;padding:8px 0 14px}

.brand-mark img {
  width: 200px;      /* adjust size as you like */
  height: auto;
  display: block;
}

.side-nav{width:100%;display:flex;flex-direction:column;gap:8px}

/* Sidebar buttons with custom image icons */
.tab{
  width:100%;
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius:12px;
  background:transparent;
  color:var(--text);
  border:1px solid transparent;
  cursor:pointer;
  text-align:left;
  font-weight:800;
  transition:background 0.2s, transform 0.1s, border-color 0.1s;
}
.tab:hover{
  background:#0c1f25;
  border-color:#1f3b44;
  transform:translateX(2px);
}
.tab.active{
  background:#0c1f25;
  border-color:var(--accent);
}

.tab-icon{
  width:30px;
  height:30px;
  display:block;
  object-fit:contain;
  flex-shrink:0;
}
.tab-label{
  font-size:1.1rem;
  font-weight:800;
  color:#ffffff;
  white-space:nowrap;
  letter-spacing:0.3px;
}

/* MAIN CENTER AREA */
.main{padding:0 0 24px;position:relative}

/* Sticky colored banner */
.section-banner{
  position:sticky; top:0; z-index:5;
  max-width:50%;
  margin:0 auto 26px;
  transition:background-color 120ms linear;
}

.sb-left{display:flex;align-items:center;gap:10px}
.back-arrow{
  width:40px;height:40px;border-radius:12px;
  border:1px solid rgba(0,0,0,.25);
  background:rgba(0,0,0,.1);
  color:#ffffff;font-weight:10000;cursor:pointer;
}
.sb-sub{font-size:.8rem;font-weight:800;opacity:.95}
.sb-title{font-size:1.2rem;font-weight:900}

/* Roadmap (endless) */
.home{padding:12px 0 120px;position:relative}
.roadmap-column{
  max-width:900px;
  margin:0 auto;
  display:flex;
  flex-direction:column;
  gap:40px;
  position:relative; 
  margin-top: 50px;
}

/* Allow connectors to show under nodes */
.chapter-group{position:relative;}
.nodes{position:relative;}
.chapter-man{pointer-events:none;z-index:0}

/* Lesson nodes */
.nodes{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:24px;
}
.node{
  display:grid;
  place-items:center;
  cursor:pointer;
  user-select:none;
  transform:translateX(var(--x,0px));
  transition:transform .15s ease;
  z-index:1;
}
.node:hover{
  transform:translateX(var(--x,0px)) translateY(-3px);
}
.node img{
  display:block;
  height:128px;
  width:auto;
  object-fit:contain;
  border:none;
  border-radius:0;
  background:transparent;
}

/* dynamic classes from JS */
.node img.img-uncompleted{ height:var(--img-size-uncompleted); width:auto; }
.node img.img-completed{   height:var(--img-size-completed);   width:auto; }

/* Lesson */
.lesson-stage{position:fixed;inset:0;background:var(--bg);z-index:40;display:none}
.lesson-stage:not(.hidden){display:block}
.top-strip{
  height:56px;display:flex;align-items:center;
  justify-content:flex-end;padding:0 24px;
}
.progress-ghost{
  flex:1;height:10px;border-radius:999px;
  background:#2a3e45;margin-right:12px;
}

#lessonProgress{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#58cc02,#6ee300);
  border-radius:999px;
transition:width 0.5s cubic-bezier(.2,.8,.2,1);
}

.lives{font-weight:900;color:#e9f1f1;font-size: 1.5rem;}

.exercise-core{
  max-width:820px;margin:0 auto;
  padding:0 20px 140px;
  display:flex;flex-direction:column;align-items:flex-start;
}
.exercise-title{
  margin:16px 0 12px;
  font-size:1.6rem;font-weight:900;
  text-align:left;
}
.avatar-row.left{
  display:flex;align-items:center;
  gap:14px;margin:8px 0 16px;
}
#exerciseAvatar{
  height:112px;width:auto;
  border-radius:18px;
  background:#0e1b20;
  object-fit:contain;
}
.bubble{
  background:#0b2630;color:var(--text);
  border:10px #4b8192;
  padding:8px 10px;border-radius:10px;
  font-size:1.3rem;
  font-weight:700;
}

.choice-list{
  width:min(640px,92vw);
  display:flex;flex-direction:column;
  gap:12px;margin-top:6px;
}
.choice{
  display:grid;
  grid-template-columns:44px 1fr;
  align-items:center;
  gap:12px;
  padding:12px 16px;
  border-radius:14px;
  border:1px solid #1f3a43;
  background:#0f2630;
  cursor:pointer;
  font-weight:800;
  color:#fff;
}

.choice.selected{outline:2px solid #2a5663}
.choice.correct{border-color:#1e6f36;background:#113522}
.choice.incorrect{border-color:#6f1e1e;background:#321717}

.match-grid{
  width:min(640px,92vw);
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;margin-top:10px;
}
.column{
  display:flex;flex-direction:column;
  gap:10px;
}
.match-item{
  padding:12px 14px;border-radius:12px;
  background:#0f2630;border:1px solid #1f3a43;
  font-weight:800;cursor:pointer;
  color:#fff;text-align:center;
}
.match-item.selected{outline:2px solid #2a7a66}
.match-item.matched{opacity:.45;pointer-events:none;filter:saturate(.6)}

/* Footer buttons */
.lesson-footer{
  position:fixed;
  left:300px;right:380px;bottom:0;
  background:var(--bg);
  border-top:1px solid #13323a;
  display:flex;justify-content:center;
  gap:56px;padding:16px 0;
  z-index:41;
}
.btn{
  height:44px;border-radius:12px;
  font-weight:800;letter-spacing:.4px;
  cursor:pointer;border:1px solid transparent;
  padding:0 28px;
}
.btn-ghost{
  background:transparent;
  color:#9fb1b8;
  border-color:#1c3942;
}
.btn-ghost:hover{
  color:#e9f1f1;
  border-color:#2a5663;
}
.btn-primary{
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  color:#08210e;border:none;min-width:160px;
}
.btn-primary:disabled{
  background:#2a3e45;color:#7b8c93;cursor:default;
}
.btn-danger{background:#a12e2e;color:#fff}

/* ===========================
   POPOVER CONTAINER
=========================== */

.popover {
  position: fixed;
  inset: 0;
  pointer-events: none;
}

.popover.hidden {
  display: none;
}

/* ===========================
   POPOVER CARD
=========================== */

.popover-card {
  position: absolute;
  min-width: 260px;
  max-width: 320px;

  background: #2c9cdb;
  color: #ffffff;
  border: 1px solid rgba(0,0,0,.2);
  border-radius: 14px;
  padding: 16px;

  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  pointer-events: auto;
  text-align: center;

  /* Animation */
  transform-origin: top center;
  animation: popIn 240ms cubic-bezier(0.16, 1, 0.3, 1);
}

/* ===========================
   TITLE STYLE
=========================== */

.popover-title {
  font-size: 1.3rem;
  font-weight: 900;
  margin-bottom: 6px;
}

/* ===========================
   SUBTEXT STYLE
=========================== */

.popover-sub {
  font-size: 1rem;
  font-weight: 700;
  opacity: 0.95;
  margin-bottom: 12px;
}

/* ===========================
   ACTION BUTTON
=========================== */

.popover-start {
  background: #ffffff;
  border: none;
  color: #2c9cdb;
  font-weight: 900;

  height: 44px;
  width: 100%;

  border-radius: 12px;
  padding: 0 18px;
  cursor: pointer;

  transition: transform 120ms ease, box-shadow 120ms ease;
}

.popover-start:hover {
  transform: scale(1.03);
  box-shadow: 0 6px 14px rgba(0,0,0,.15);
}

/* ===========================
   ARROW POINTER
=========================== */

.popover-card::before {
  content: "";
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);

  width: 0;
  height: 0;

  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 10px solid #2c9cdb;
}

/* ===========================
   APPEAR ANIMATION
=========================== */

@keyframes popIn {
  from {
    transform: scale(0.85);
  }
  to {
    transform: scale(1);
  }
}




/* RIGHT BAR */
.rightbar{
  padding:15px;
  position:sticky;top:0;
  height:100vh;overflow:auto;
  display:flex;flex-direction:column;
  gap:10px;
}
.rightbar.wide{width:490px}
.card{
  background:#0c1f25;
  border:1px solid #1f3a43;
  border-radius:16px;
  padding:16px;
  box-shadow:var(--shadow);
}

/* League card layout */
.league-card {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 18px;
}

/* Top row: icon + text */
.league-row {
    display: flex;
    align-items: center;
    gap: 14px;
}

/* League icon */
.league-icon {
    height: 100px;
    width: auto;
    object-fit: contain;
}

/* League text */
.league-info {
    display: flex;
    flex-direction: column;
}

.league-title {
    font-family: var(--font);
    font-size: 1.5rem;
    font-weight: 900;
    color: #ffffff;
    margin-bottom: 4px;
    font-weight: 900;
    letter-spacing: 0.5px;
}

.league-desc {
    font-family: var(--font);
    font-size: 1rem;
    line-height: 1.3;
    color: #c9dadd;
    max-width: 260px;
    margin: 2px;
}

/* Rank bar */
.league-rank {
    width: 100%;
    padding: 10px 0;
    text-align: center;
    border-radius: 16px;
    border: 2px solid #1f3a43;
    font-family: var(--font);
    font-size: 1rem;
    font-weight: 900;
    color: #ffffff;
}


.card-title{font-weight:900;margin-bottom:10px}
.mini-list{margin:0;padding-left:18px;color:#9fb1b8} /* left for compatibility */
.small{height:36px;padding:0 12px}

/* Stats row with icons */
.stats-row{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.stat{
  display:flex;
  align-items:center;
  gap:4px;
  background:#0c1f25;
  border:1px solid #1f3a43;
  border-radius:999px;
  border:none; 
  padding:3px 5px;
  font-weight:800;
  white-space:nowrap;
}
.stat-icon{
  height:30px;width:auto;
  display:block;object-fit:contain;
}
.stat-text{color:#e9f1f1;}

/* Emerald card */
.league-card .card-title{
  display:flex;
  align-items:center;
  gap:10px;
}

/* Daily Quests slider */
.quest-strip{
  display:flex;
  align-items:center;
  gap:14px;
  overflow-x:auto;
  padding:6px 2px;
  scrollbar-width:thin;
}
.quest{
  display:flex;
  align-items:center;
  gap:10px;
  background:#0c1f25;
  border:1px solid #1f3a43;
  border-radius:12px;
  padding:8px 10px;
  white-space:nowrap;
}
.quest-label{
  color:#9fb1b8;
  font-weight:800;
}

.quest-fill {
  height: 100%;
  background: #dbd812;
  border-radius: 999px;
  width: 0%; 
  transition: width 1.4s cubic-bezier(0.16, 1, 0.3, 1);
}



/* --- Daily Quests --- */

.quest-card {
  display: grid;
  grid-template-columns: 48px 1fr 48px;
  align-items: center;
  gap: 12px;
  background: #0c1f25;
  padding: 12px;
  border-radius: 14px;
  margin-bottom: 14px;
}

.quest-icon {
  height: 40px;
  width: auto;
}

.quest-reward {
  height: 40px;
  width: auto;
}

.quest-content {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.quest-title {
  font-family: 'Heiders Sans C Black', 'Poppins', 'Nunito', sans-serif;
  font-size: 1rem;
  font-weight: 900;
  color: #ffffff;
  text-align: left;
}

.quest-progress {
  width: 100%;
  height: 17px;
  background: #12323a;
  border-radius: 6px;
  position: relative;
  overflow: hidden;
}

.quest-progress-fill {
  height: 100%;
  background: #dbc712;
  border-radius: 6px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding-right: 6px;
}

.quest-progress-text {
  font-family: 'Heiders Sans C Black', 'Poppins', 'Nunito', sans-serif;
  font-size: 0.9rem;
  font-weight: 1000;
  color: #a07017;
  pointer-events: none;
}


.quest-bar{
  width:120px;height:10px;
  border-radius:999px;
  overflow:visible;
  background:#0c2730;
  border:1px solid #183640;
}
.quest-bar > div{
  height:100%;
  background:#58cc02;
}

/* RESPONSIVE */
@media (max-width:1100px){
  .app-shell{grid-template-columns:72px 1fr 0}
  .rightbar{display:none}
  .tab-label{display:none}
  .sidebar{padding:12px 6px}
  .lesson-footer{left:72px;right:0}
}
@media (max-width:720px){
  html{font-size:15px}
}
